<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coal India Limited - Coal Vision</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Welcome to Coal Vision</h1>
        </header>
        <div class="content">
            <div class="logo-container">
                <img src="logo.jpeg" alt="Coal India Limited Logo" class="logo">
            </div>
            <div class="login-form">
                <form id="loginForm">
                    <h2>Login</h2>
                    <input type="text" placeholder="Registration ID / Email / Phone" id="identifier" required>
                    <input type="password" placeholder="Password" id="password" required>
                    <div class="remember-forgot">
                        <label><input type="checkbox"> Remember me</label>
                        <a href="#">Forgot password?</a>
                    </div>
                    <button type="submit" id="sign">Sign In</button>
                    <a href="#" class="help-link">Need assistance? Get Help Here</a>
                </form>
                <div class="app-links">
                    <a href="#"><img src="googleplay.jpeg" alt="Google Play"></a>
                    <a href="#"><img src="appstore.jpeg" alt="App Store"></a>
                </div>
            </div>
        </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
    <script>
const firebaseConfig = {
  apiKey: "AIzaSyBZbkbWTlYtScXenDL9n-CgYSNluFtRf9E",
  authDomain: "dataadd-8cf4f.firebaseapp.com",
  databaseURL: "https://dataadd-8cf4f-default-rtdb.firebaseio.com",
  projectId: "dataadd-8cf4f",
  storageBucket: "dataadd-8cf4f.appspot.com",
  messagingSenderId: "163416489588",
  appId: "1:163416489588:web:d786217186f5e6ebe01b21",
  measurementId: "G-W8YZ1PKF5X"
};

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        document.getElementById('loginForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const name = document.getElementById('identifier').value;
            const password = document.getElementById('password').value;

            // Validate credentials
            db.ref('dataform').orderByChild('name').equalTo(name).once('value', snapshot => {
                if (snapshot.exists()) {
                    snapshot.forEach(childSnapshot => {
                        const user = childSnapshot.val();
                        if (user.pass === password) {
                            // Redirect to page2.html with identifier in URL
                            window.location.href = `page2.html?name=${encodeURIComponent(name)}`;
                        } else {
                            alert('Invalid password.');
                        }
                    });
                } else {
                    alert('User not found.');
                }
            });
        });
    </script>
</body>
</html>
